import{S as Sn,i as In,s as $n,e as I,t as B,c as $,a as E,h as R,d as g,b as k,g as F,H as y,j as To,R as ae,k as O,T as le,m as G,n as It,w as Ji,I as os,J as ss,K as as,r as re,p as he,f as Ur,o as ls,q as hs,F as us,U as cs,D as Yi,x as Ze,y as Je,z as je,A as fs,B as zr,C as et,Q as Xr}from"../../chunks/index-6a923fd1.js";import{B as ds}from"../../chunks/blog-278d05c6.js";const wn=([t,e],[n,i])=>Math.sqrt((t-n)**2+(e-i)**2),So=(t,e)=>{var i;const n=e!=null?e:-1;t[n]=((i=t[n])!=null?i:0)+1},_n={x:0,y:0,i:-1},ps=(t,e,[n,i])=>{const r={};return e.forEach(([o,s])=>{let a=null,l=200;t.forEach(({x:h,y:u,i:c})=>{const f=wn([o+n,s+i],[h,u]);f<l&&(a=c,l=f)}),So(r,a)}),t.reduce((o,s)=>{var h,u;const a=(h=r[s.i])!=null?h:0,l=a-((u=r[o.i])!=null?u:0);return l===0?(r[-1]=a,_n):l>0?s:o},_n)},gs=(t,e,[n,i],r)=>{const o={};return e.forEach(([s,a])=>{t.forEach(({x:l,y:h,i:u})=>{wn([s+n,a+i],[l,h])<r&&So(o,u)})}),t.reduce((s,a)=>{var u,c;const l=(u=o[a.i])!=null?u:0,h=l-((c=o[s.i])!=null?c:0);return h===0?(o[-1]=l,_n):h>0?a:s},_n)};class Wr extends Map{constructor(e,n=vs){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(Kr(this,e))}has(e){return super.has(Kr(this,e))}set(e,n){return super.set(ms(this,e),n)}delete(e){return super.delete(ys(this,e))}}function Kr({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function ms({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function ys({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function vs(t){return t!==null&&typeof t=="object"?t.valueOf():t}var ws={value:()=>{}};function ji(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new mn(n)}function mn(t){this._=t}function _s(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}mn.prototype=ji.prototype={constructor:mn,on:function(t,e){var n=this._,i=_s(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=bs(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=Qr(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Qr(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new mn(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function bs(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Qr(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ws,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Hi="http://www.w3.org/1999/xhtml",Zr={svg:"http://www.w3.org/2000/svg",xhtml:Hi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Zr.hasOwnProperty(e)?{space:Zr[e],local:t}:t}function xs(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Hi&&e.documentElement.namespaceURI===Hi?e.createElement(t):e.createElementNS(n,t)}}function ks(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Io(t){var e=Cn(t);return(e.local?ks:xs)(e)}function As(){}function er(t){return t==null?As:function(){return this.querySelector(t)}}function Es(t){typeof t!="function"&&(t=er(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=new Array(s),l,h,u=0;u<s;++u)(l=o[u])&&(h=t.call(l,l.__data__,u,o))&&("__data__"in l&&(h.__data__=l.__data__),a[u]=h);return new ee(i,this._parents)}function Ns(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ts(){return[]}function $o(t){return t==null?Ts:function(){return this.querySelectorAll(t)}}function Ss(t){return function(){return Ns(t.apply(this,arguments))}}function Is(t){typeof t=="function"?t=Ss(t):t=$o(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,h=0;h<a;++h)(l=s[h])&&(i.push(t.call(l,l.__data__,h,s)),r.push(l));return new ee(i,r)}function Co(t){return function(){return this.matches(t)}}function Po(t){return function(e){return e.matches(t)}}var $s=Array.prototype.find;function Cs(t){return function(){return $s.call(this.children,t)}}function Ps(){return this.firstElementChild}function Ms(t){return this.select(t==null?Ps:Cs(typeof t=="function"?t:Po(t)))}var Bs=Array.prototype.filter;function Rs(){return Array.from(this.children)}function Fs(t){return function(){return Bs.call(this.children,t)}}function qs(t){return this.selectAll(t==null?Rs:Fs(typeof t=="function"?t:Po(t)))}function Ds(t){typeof t!="function"&&(t=Co(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],l,h=0;h<s;++h)(l=o[h])&&t.call(l,l.__data__,h,o)&&a.push(l);return new ee(i,this._parents)}function Mo(t){return new Array(t.length)}function Ls(){return new ee(this._enter||this._groups.map(Mo),this._parents)}function bn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}bn.prototype={constructor:bn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Vs(t){return function(){return t}}function Ys(t,e,n,i,r,o){for(var s=0,a,l=e.length,h=o.length;s<h;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new bn(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function Hs(t,e,n,i,r,o,s){var a,l,h=new Map,u=e.length,c=o.length,f=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(f[a]=d=s.call(l,l.__data__,a,e)+"",h.has(d)?r[a]=l:h.set(d,l));for(a=0;a<c;++a)d=s.call(t,o[a],a,o)+"",(l=h.get(d))?(i[a]=l,l.__data__=o[a],h.delete(d)):n[a]=new bn(t,o[a]);for(a=0;a<u;++a)(l=e[a])&&h.get(f[a])===l&&(r[a]=l)}function Os(t){return t.__data__}function Gs(t,e){if(!arguments.length)return Array.from(this,Os);var n=e?Hs:Ys,i=this._parents,r=this._groups;typeof t!="function"&&(t=Vs(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),h=0;h<o;++h){var u=i[h],c=r[h],f=c.length,d=Us(t.call(u,u&&u.__data__,h,i)),v=d.length,m=a[h]=new Array(v),b=s[h]=new Array(v),_=l[h]=new Array(f);n(u,c,m,b,_,d,e);for(var N=0,q=0,w,C;N<v;++N)if(w=m[N]){for(N>=q&&(q=N+1);!(C=b[q])&&++q<v;);w._next=C||null}}return s=new ee(s,i),s._enter=a,s._exit=l,s}function Us(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zs(){return new ee(this._exit||this._groups.map(Mo),this._parents)}function Xs(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Ws(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var h=n[l],u=i[l],c=h.length,f=a[l]=new Array(c),d,v=0;v<c;++v)(d=h[v]||u[v])&&(f[v]=d);for(;l<r;++l)a[l]=n[l];return new ee(a,this._parents)}function Ks(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Qs(t){t||(t=Zs);function e(c,f){return c&&f?t(c.__data__,f.__data__):!c-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,l=r[o]=new Array(a),h,u=0;u<a;++u)(h=s[u])&&(l[u]=h);l.sort(e)}return new ee(r,this._parents).order()}function Zs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Js(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function js(){return Array.from(this)}function ea(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function ta(){let t=0;for(const e of this)++t;return t}function na(){return!this.node()}function ia(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}function ra(t){return function(){this.removeAttribute(t)}}function oa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sa(t,e){return function(){this.setAttribute(t,e)}}function aa(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function la(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ha(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ua(t,e){var n=Cn(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?oa:ra:typeof e=="function"?n.local?ha:la:n.local?aa:sa)(n,e))}function Bo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ca(t){return function(){this.style.removeProperty(t)}}function fa(t,e,n){return function(){this.style.setProperty(t,e,n)}}function da(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function pa(t,e,n){return arguments.length>1?this.each((e==null?ca:typeof e=="function"?da:fa)(t,e,n==null?"":n)):bt(this.node(),t)}function bt(t,e){return t.style.getPropertyValue(e)||Bo(t).getComputedStyle(t,null).getPropertyValue(e)}function ga(t){return function(){delete this[t]}}function ma(t,e){return function(){this[t]=e}}function ya(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function va(t,e){return arguments.length>1?this.each((e==null?ga:typeof e=="function"?ya:ma)(t,e)):this.node()[t]}function Ro(t){return t.trim().split(/^|\s+/)}function tr(t){return t.classList||new Fo(t)}function Fo(t){this._node=t,this._names=Ro(t.getAttribute("class")||"")}Fo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qo(t,e){for(var n=tr(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Do(t,e){for(var n=tr(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function wa(t){return function(){qo(this,t)}}function _a(t){return function(){Do(this,t)}}function ba(t,e){return function(){(e.apply(this,arguments)?qo:Do)(this,t)}}function xa(t,e){var n=Ro(t+"");if(arguments.length<2){for(var i=tr(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?ba:e?wa:_a)(n,e))}function ka(){this.textContent=""}function Aa(t){return function(){this.textContent=t}}function Ea(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Na(t){return arguments.length?this.each(t==null?ka:(typeof t=="function"?Ea:Aa)(t)):this.node().textContent}function Ta(){this.innerHTML=""}function Sa(t){return function(){this.innerHTML=t}}function Ia(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function $a(t){return arguments.length?this.each(t==null?Ta:(typeof t=="function"?Ia:Sa)(t)):this.node().innerHTML}function Ca(){this.nextSibling&&this.parentNode.appendChild(this)}function Pa(){return this.each(Ca)}function Ma(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ba(){return this.each(Ma)}function Ra(t){var e=typeof t=="function"?t:Io(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Fa(){return null}function qa(t,e){var n=typeof t=="function"?t:Io(t),i=e==null?Fa:typeof e=="function"?e:er(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Da(){var t=this.parentNode;t&&t.removeChild(this)}function La(){return this.each(Da)}function Va(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ya(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ha(t){return this.select(t?Ya:Va)}function Oa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ga(t){return function(e){t.call(this,e,this.__data__)}}function Ua(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function za(t){return function(){var e=this.__on;if(!!e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function Xa(t,e,n){return function(){var i=this.__on,r,o=Ga(e);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Wa(t,e,n){var i=Ua(t+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,h=a.length,u;l<h;++l)for(r=0,u=a[l];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?Xa:za,r=0;r<o;++r)this.each(a(i[r],e,n));return this}function Lo(t,e,n){var i=Bo(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Ka(t,e){return function(){return Lo(this,t,e)}}function Qa(t,e){return function(){return Lo(this,t,e.apply(this,arguments))}}function Za(t,e){return this.each((typeof e=="function"?Qa:Ka)(t,e))}function*Ja(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Vo=[null];function ee(t,e){this._groups=t,this._parents=e}function Ft(){return new ee([[document.documentElement]],Vo)}function ja(){return this}ee.prototype=Ft.prototype={constructor:ee,select:Es,selectAll:Is,selectChild:Ms,selectChildren:qs,filter:Ds,data:Gs,enter:Ls,exit:zs,join:Xs,merge:Ws,selection:ja,order:Ks,sort:Qs,call:Js,nodes:js,node:ea,size:ta,empty:na,each:ia,attr:ua,style:pa,property:va,classed:xa,text:Na,html:$a,raise:Pa,lower:Ba,append:Ra,insert:qa,remove:La,clone:Ha,datum:Oa,on:Wa,dispatch:Za,[Symbol.iterator]:Ja};function Ee(t){return typeof t=="string"?new ee([[document.querySelector(t)]],[document.documentElement]):new ee([[t]],Vo)}function el(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Oi(t,e){if(t=el(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const tl={passive:!1},$t={capture:!0,passive:!1};function Fi(t){t.stopImmediatePropagation()}function wt(t){t.preventDefault(),t.stopImmediatePropagation()}function nl(t){var e=t.document.documentElement,n=Ee(t).on("dragstart.drag",wt,$t);"onselectstart"in e?n.on("selectstart.drag",wt,$t):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function il(t,e){var n=t.document.documentElement,i=Ee(t).on("dragstart.drag",null);e&&(i.on("click.drag",wt,$t),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var ln=t=>()=>t;function Gi(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:h,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:u}})}Gi.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function rl(t){return!t.ctrlKey&&!t.button}function ol(){return this.parentNode}function sl(t,e){return e==null?{x:t.x,y:t.y}:e}function al(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yo(){var t=rl,e=ol,n=sl,i=al,r={},o=ji("start","drag","end"),s=0,a,l,h,u,c=0;function f(w){w.on("mousedown.drag",d).filter(i).on("touchstart.drag",b).on("touchmove.drag",_,tl).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(w,C){if(!(u||!t.call(this,w,C))){var x=q(this,e.call(this,w,C),w,C,"mouse");!x||(Ee(w.view).on("mousemove.drag",v,$t).on("mouseup.drag",m,$t),nl(w.view),Fi(w),h=!1,a=w.clientX,l=w.clientY,x("start",w))}}function v(w){if(wt(w),!h){var C=w.clientX-a,x=w.clientY-l;h=C*C+x*x>c}r.mouse("drag",w)}function m(w){Ee(w.view).on("mousemove.drag mouseup.drag",null),il(w.view,h),wt(w),r.mouse("end",w)}function b(w,C){if(!!t.call(this,w,C)){var x=w.changedTouches,T=e.call(this,w,C),M=x.length,L,A;for(L=0;L<M;++L)(A=q(this,T,w,C,x[L].identifier,x[L]))&&(Fi(w),A("start",w,x[L]))}}function _(w){var C=w.changedTouches,x=C.length,T,M;for(T=0;T<x;++T)(M=r[C[T].identifier])&&(wt(w),M("drag",w,C[T]))}function N(w){var C=w.changedTouches,x=C.length,T,M;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),T=0;T<x;++T)(M=r[C[T].identifier])&&(Fi(w),M("end",w,C[T]))}function q(w,C,x,T,M,L){var A=o.copy(),S=Oi(L||x,C),D,V,H;if((H=n.call(w,new Gi("beforestart",{sourceEvent:x,target:f,identifier:M,active:s,x:S[0],y:S[1],dx:0,dy:0,dispatch:A}),T))!=null)return D=H.x-S[0]||0,V=H.y-S[1]||0,function X(U,Y,z){var W=S,K;switch(U){case"start":r[M]=X,K=s++;break;case"end":delete r[M],--s;case"drag":S=Oi(z||Y,C),K=s;break}A.call(U,w,new Gi(U,{sourceEvent:Y,subject:H,target:f,identifier:M,active:K,x:S[0]+D,y:S[1]+V,dx:S[0]-W[0],dy:S[1]-W[1],dispatch:A}),T)}}return f.filter=function(w){return arguments.length?(t=typeof w=="function"?w:ln(!!w),f):t},f.container=function(w){return arguments.length?(e=typeof w=="function"?w:ln(w),f):e},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:ln(w),f):n},f.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:ln(!!w),f):i},f.on=function(){var w=o.on.apply(o,arguments);return w===o?f:w},f.clickDistance=function(w){return arguments.length?(c=(w=+w)*w,f):Math.sqrt(c)},f}function nr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ho(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function qt(){}var Ct=.7,xn=1/Ct,_t="\\s*([+-]?\\d+)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ll=/^#([0-9a-f]{3,8})$/,hl=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),ul=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),cl=new RegExp(`^rgba\\(${_t},${_t},${_t},${Pt}\\)$`),fl=new RegExp(`^rgba\\(${ue},${ue},${ue},${Pt}\\)$`),dl=new RegExp(`^hsl\\(${Pt},${ue},${ue}\\)$`),pl=new RegExp(`^hsla\\(${Pt},${ue},${ue},${Pt}\\)$`),Jr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nr(qt,Mt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:jr,formatHex:jr,formatHex8:gl,formatHsl:ml,formatRgb:eo,toString:eo});function jr(){return this.rgb().formatHex()}function gl(){return this.rgb().formatHex8()}function ml(){return Oo(this).formatHsl()}function eo(){return this.rgb().formatRgb()}function Mt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ll.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?to(e):n===3?new j(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?hn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?hn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=hl.exec(t))?new j(e[1],e[2],e[3],1):(e=ul.exec(t))?new j(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=cl.exec(t))?hn(e[1],e[2],e[3],e[4]):(e=fl.exec(t))?hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dl.exec(t))?ro(e[1],e[2]/100,e[3]/100,1):(e=pl.exec(t))?ro(e[1],e[2]/100,e[3]/100,e[4]):Jr.hasOwnProperty(t)?to(Jr[t]):t==="transparent"?new j(NaN,NaN,NaN,0):null}function to(t){return new j(t>>16&255,t>>8&255,t&255,1)}function hn(t,e,n,i){return i<=0&&(t=e=n=NaN),new j(t,e,n,i)}function yl(t){return t instanceof qt||(t=Mt(t)),t?(t=t.rgb(),new j(t.r,t.g,t.b,t.opacity)):new j}function Ui(t,e,n,i){return arguments.length===1?yl(t):new j(t,e,n,i==null?1:i)}function j(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}nr(j,Ui,Ho(qt,{brighter(t){return t=t==null?xn:Math.pow(xn,t),new j(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ct:Math.pow(Ct,t),new j(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new j(it(this.r),it(this.g),it(this.b),kn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:no,formatHex:no,formatHex8:vl,formatRgb:io,toString:io}));function no(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}`}function vl(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}${tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function io(){const t=kn(this.opacity);return`${t===1?"rgb(":"rgba("}${it(this.r)}, ${it(this.g)}, ${it(this.b)}${t===1?")":`, ${t})`}`}function kn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function it(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tt(t){return t=it(t),(t<16?"0":"")+t.toString(16)}function ro(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ie(t,e,n,i)}function Oo(t){if(t instanceof ie)return new ie(t.h,t.s,t.l,t.opacity);if(t instanceof qt||(t=Mt(t)),!t)return new ie;if(t instanceof ie)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(e===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new ie(s,a,l,t.opacity)}function wl(t,e,n,i){return arguments.length===1?Oo(t):new ie(t,e,n,i==null?1:i)}function ie(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}nr(ie,wl,Ho(qt,{brighter(t){return t=t==null?xn:Math.pow(xn,t),new ie(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ct:Math.pow(Ct,t),new ie(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new j(qi(t>=240?t-240:t+120,r,i),qi(t,r,i),qi(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new ie(oo(this.h),un(this.s),un(this.l),kn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=kn(this.opacity);return`${t===1?"hsl(":"hsla("}${oo(this.h)}, ${un(this.s)*100}%, ${un(this.l)*100}%${t===1?")":`, ${t})`}`}}));function oo(t){return t=(t||0)%360,t<0?t+360:t}function un(t){return Math.max(0,Math.min(1,t||0))}function qi(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var Go=t=>()=>t;function _l(t,e){return function(n){return t+n*e}}function bl(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function xl(t){return(t=+t)==1?Uo:function(e,n){return n-e?bl(e,n,t):Go(isNaN(e)?n:e)}}function Uo(t,e){var n=e-t;return n?_l(t,n):Go(isNaN(t)?e:t)}var so=function t(e){var n=xl(e);function i(r,o){var s=n((r=Ui(r)).r,(o=Ui(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),h=Uo(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=h(u),r+""}}return i.gamma=t,i}(1);function Ae(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Di=new RegExp(zi.source,"g");function kl(t){return function(){return t}}function Al(t){return function(e){return t(e)+""}}function El(t,e){var n=zi.lastIndex=Di.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(i=zi.exec(t))&&(r=Di.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Ae(i,r)})),n=Di.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Al(l[0].x):kl(e):(e=l.length,function(h){for(var u=0,c;u<e;++u)a[(c=l[u]).i]=c.x(h);return a.join("")})}var ao=180/Math.PI,Xi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zo(t,e,n,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*ao,skewX:Math.atan(l)*ao,scaleX:s,scaleY:a}}var cn;function Nl(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Xi:zo(e.a,e.b,e.c,e.d,e.e,e.f)}function Tl(t){return t==null||(cn||(cn=document.createElementNS("http://www.w3.org/2000/svg","g")),cn.setAttribute("transform",t),!(t=cn.transform.baseVal.consolidate()))?Xi:(t=t.matrix,zo(t.a,t.b,t.c,t.d,t.e,t.f))}function Xo(t,e,n,i){function r(h){return h.length?h.pop()+" ":""}function o(h,u,c,f,d,v){if(h!==c||u!==f){var m=d.push("translate(",null,e,null,n);v.push({i:m-4,x:Ae(h,c)},{i:m-2,x:Ae(u,f)})}else(c||f)&&d.push("translate("+c+e+f+n)}function s(h,u,c,f){h!==u?(h-u>180?u+=360:u-h>180&&(h+=360),f.push({i:c.push(r(c)+"rotate(",null,i)-2,x:Ae(h,u)})):u&&c.push(r(c)+"rotate("+u+i)}function a(h,u,c,f){h!==u?f.push({i:c.push(r(c)+"skewX(",null,i)-2,x:Ae(h,u)}):u&&c.push(r(c)+"skewX("+u+i)}function l(h,u,c,f,d,v){if(h!==c||u!==f){var m=d.push(r(d)+"scale(",null,",",null,")");v.push({i:m-4,x:Ae(h,c)},{i:m-2,x:Ae(u,f)})}else(c!==1||f!==1)&&d.push(r(d)+"scale("+c+","+f+")")}return function(h,u){var c=[],f=[];return h=t(h),u=t(u),o(h.translateX,h.translateY,u.translateX,u.translateY,c,f),s(h.rotate,u.rotate,c,f),a(h.skewX,u.skewX,c,f),l(h.scaleX,h.scaleY,u.scaleX,u.scaleY,c,f),h=u=null,function(d){for(var v=-1,m=f.length,b;++v<m;)c[(b=f[v]).i]=b.x(d);return c.join("")}}}var Sl=Xo(Nl,"px, ","px)","deg)"),Il=Xo(Tl,", ",")",")"),xt=0,Tt=0,Et=0,Wo=1e3,An,St,En=0,rt=0,Pn=0,Bt=typeof performance=="object"&&performance.now?performance:Date,Ko=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ir(){return rt||(Ko($l),rt=Bt.now()+Pn)}function $l(){rt=0}function Nn(){this._call=this._time=this._next=null}Nn.prototype=Qo.prototype={constructor:Nn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ir():+n)+(e==null?0:+e),!this._next&&St!==this&&(St?St._next=this:An=this,St=this),this._call=t,this._time=n,Wi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wi())}};function Qo(t,e,n){var i=new Nn;return i.restart(t,e,n),i}function Cl(){ir(),++xt;for(var t=An,e;t;)(e=rt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xt}function lo(){rt=(En=Bt.now())+Pn,xt=Tt=0;try{Cl()}finally{xt=0,Ml(),rt=0}}function Pl(){var t=Bt.now(),e=t-En;e>Wo&&(Pn-=e,En=t)}function Ml(){for(var t,e=An,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:An=n);St=t,Wi(i)}function Wi(t){if(!xt){Tt&&(Tt=clearTimeout(Tt));var e=t-rt;e>24?(t<1/0&&(Tt=setTimeout(lo,t-Bt.now()-Pn)),Et&&(Et=clearInterval(Et))):(Et||(En=Bt.now(),Et=setInterval(Pl,Wo)),xt=1,Ko(lo))}}function ho(t,e,n){var i=new Nn;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Bl=ji("start","end","cancel","interrupt"),Rl=[],Zo=0,uo=1,Ki=2,yn=3,co=4,Qi=5,vn=6;function Mn(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Fl(t,n,{name:e,index:i,group:r,on:Bl,tween:Rl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Zo})}function rr(t,e){var n=oe(t,e);if(n.state>Zo)throw new Error("too late; already scheduled");return n}function ce(t,e){var n=oe(t,e);if(n.state>yn)throw new Error("too late; already running");return n}function oe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Fl(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Qo(o,0,n.time);function o(h){n.state=uo,n.timer.restart(s,n.delay,n.time),n.delay<=h&&s(h-n.delay)}function s(h){var u,c,f,d;if(n.state!==uo)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===yn)return ho(s);d.state===co?(d.state=vn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=vn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(ho(function(){n.state===yn&&(n.state=co,n.timer.restart(a,n.delay,n.time),a(h))}),n.state=Ki,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ki){for(n.state=yn,r=new Array(f=n.tween.length),u=0,c=-1;u<f;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function a(h){for(var u=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(l),n.state=Qi,1),c=-1,f=r.length;++c<f;)r[c].call(t,u);n.state===Qi&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=vn,n.timer.stop(),delete i[e];for(var h in i)return;delete t.__transition}}function ql(t,e){var n=t.__transition,i,r,o=!0,s;if(!!n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>Ki&&i.state<Qi,i.state=vn,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function Dl(t){return this.each(function(){ql(this,t)})}function Ll(t,e){var n,i;return function(){var r=ce(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Vl(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=ce(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},l=0,h=r.length;l<h;++l)if(r[l].name===e){r[l]=a;break}l===h&&r.push(a)}o.tween=r}}function Yl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=oe(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?Ll:Vl)(n,t,e))}function or(t,e,n){var i=t._id;return t.each(function(){var r=ce(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return oe(r,i).value[e]}}function Jo(t,e){var n;return(typeof e=="number"?Ae:e instanceof Mt?so:(n=Mt(e))?(e=n,so):El)(t,e)}function Hl(t){return function(){this.removeAttribute(t)}}function Ol(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gl(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function Ul(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function zl(t,e,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a)))}}function Xl(t,e,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a)))}}function Wl(t,e){var n=Cn(t),i=n==="transform"?Il:Jo;return this.attrTween(t,typeof e=="function"?(n.local?Xl:zl)(n,i,or(this,"attr."+t,e)):e==null?(n.local?Ol:Hl)(n):(n.local?Ul:Gl)(n,i,e))}function Kl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ql(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Zl(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Ql(t,o)),n}return r._value=e,r}function Jl(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Kl(t,o)),n}return r._value=e,r}function jl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Cn(t);return this.tween(n,(i.local?Zl:Jl)(i,e))}function eh(t,e){return function(){rr(this,t).delay=+e.apply(this,arguments)}}function th(t,e){return e=+e,function(){rr(this,t).delay=e}}function nh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?eh:th)(e,t)):oe(this.node(),e).delay}function ih(t,e){return function(){ce(this,t).duration=+e.apply(this,arguments)}}function rh(t,e){return e=+e,function(){ce(this,t).duration=e}}function oh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ih:rh)(e,t)):oe(this.node(),e).duration}function sh(t,e){if(typeof e!="function")throw new Error;return function(){ce(this,t).ease=e}}function ah(t){var e=this._id;return arguments.length?this.each(sh(e,t)):oe(this.node(),e).ease}function lh(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ce(this,t).ease=n}}function hh(t){if(typeof t!="function")throw new Error;return this.each(lh(this._id,t))}function uh(t){typeof t!="function"&&(t=Co(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],l,h=0;h<s;++h)(l=o[h])&&t.call(l,l.__data__,h,o)&&a.push(l);return new ge(i,this._parents,this._name,this._id)}function ch(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=e[a],h=n[a],u=l.length,c=s[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||h[d])&&(c[d]=f);for(;a<i;++a)s[a]=e[a];return new ge(s,this._parents,this._name,this._id)}function fh(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function dh(t,e,n){var i,r,o=fh(e)?rr:ce;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}function ph(t,e){var n=this._id;return arguments.length<2?oe(this.node(),n).on.on(t):this.each(dh(n,t,e))}function gh(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function mh(){return this.on("end.remove",gh(this._id))}function yh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=er(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,h=o[s]=new Array(l),u,c,f=0;f<l;++f)(u=a[f])&&(c=t.call(u,u.__data__,f,a))&&("__data__"in u&&(c.__data__=u.__data__),h[f]=c,Mn(h[f],e,n,f,h,oe(u,n)));return new ge(o,this._parents,e,n)}function vh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=$o(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],h=l.length,u,c=0;c<h;++c)if(u=l[c]){for(var f=t.call(u,u.__data__,c,l),d,v=oe(u,n),m=0,b=f.length;m<b;++m)(d=f[m])&&Mn(d,e,n,m,f,v);o.push(f),s.push(u)}return new ge(o,s,e,n)}var wh=Ft.prototype.constructor;function _h(){return new wh(this._groups,this._parents)}function bh(t,e){var n,i,r;return function(){var o=bt(this,t),s=(this.style.removeProperty(t),bt(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function jo(t){return function(){this.style.removeProperty(t)}}function xh(t,e,n){var i,r=n+"",o;return function(){var s=bt(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function kh(t,e,n){var i,r,o;return function(){var s=bt(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),bt(this,t))),s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a))}}function Ah(t,e){var n,i,r,o="style."+e,s="end."+o,a;return function(){var l=ce(this,t),h=l.on,u=l.value[o]==null?a||(a=jo(e)):void 0;(h!==n||r!==u)&&(i=(n=h).copy()).on(s,r=u),l.on=i}}function Eh(t,e,n){var i=(t+="")=="transform"?Sl:Jo;return e==null?this.styleTween(t,bh(t,i)).on("end.style."+t,jo(t)):typeof e=="function"?this.styleTween(t,kh(t,i,or(this,"style."+t,e))).each(Ah(this._id,t)):this.styleTween(t,xh(t,i,e),n).on("end.style."+t,null)}function Nh(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Th(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&Nh(t,s,n)),i}return o._value=e,o}function Sh(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Th(t,e,n==null?"":n))}function Ih(t){return function(){this.textContent=t}}function $h(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Ch(t){return this.tween("text",typeof t=="function"?$h(or(this,"text",t)):Ih(t==null?"":t+""))}function Ph(t){return function(e){this.textContent=t.call(this,e)}}function Mh(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Ph(r)),e}return i._value=t,i}function Bh(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Mh(t))}function Rh(){for(var t=this._name,e=this._id,n=es(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,h=0;h<a;++h)if(l=s[h]){var u=oe(l,e);Mn(l,t,n,h,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ge(i,this._parents,t,n)}function Fh(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};n.each(function(){var h=ce(this,i),u=h.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),h.on=e}),r===0&&o()})}var qh=0;function ge(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function es(){return++qh}var de=Ft.prototype;ge.prototype={constructor:ge,select:yh,selectAll:vh,selectChild:de.selectChild,selectChildren:de.selectChildren,filter:uh,merge:ch,selection:_h,transition:Rh,call:de.call,nodes:de.nodes,node:de.node,size:de.size,empty:de.empty,each:de.each,on:ph,attr:Wl,attrTween:jl,style:Eh,styleTween:Sh,text:Ch,textTween:Bh,remove:mh,tween:Yl,delay:nh,duration:oh,ease:ah,easeVarying:hh,end:Fh,[Symbol.iterator]:de[Symbol.iterator]};function Dh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Lh={time:null,delay:0,duration:250,ease:Dh};function Vh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Yh(t){var e,n;t instanceof ge?(e=t._id,t=t._name):(e=es(),(n=Lh).time=ir(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,h=0;h<a;++h)(l=s[h])&&Mn(l,t,e,h,s,n||Vh(l,e));return new ge(i,this._parents,t,e)}Ft.prototype.interrupt=Dl;Ft.prototype.transition=Yh;const pe=11102230246251565e-32,Z=134217729,Hh=(3+8*pe)*pe;function Li(t,e,n,i,r){let o,s,a,l,h=e[0],u=i[0],c=0,f=0;u>h==u>-h?(o=h,h=e[++c]):(o=u,u=i[++f]);let d=0;if(c<t&&f<n)for(u>h==u>-h?(s=h+o,a=o-(s-h),h=e[++c]):(s=u+o,a=o-(s-u),u=i[++f]),o=s,a!==0&&(r[d++]=a);c<t&&f<n;)u>h==u>-h?(s=o+h,l=s-o,a=o-(s-l)+(h-l),h=e[++c]):(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++f]),o=s,a!==0&&(r[d++]=a);for(;c<t;)s=o+h,l=s-o,a=o-(s-l)+(h-l),h=e[++c],o=s,a!==0&&(r[d++]=a);for(;f<n;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++f],o=s,a!==0&&(r[d++]=a);return(o!==0||d===0)&&(r[d++]=o),d}function Oh(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function Dt(t){return new Float64Array(t)}const Gh=(3+16*pe)*pe,Uh=(2+12*pe)*pe,zh=(9+64*pe)*pe*pe,gt=Dt(4),fo=Dt(8),po=Dt(12),go=Dt(16),J=Dt(4);function Xh(t,e,n,i,r,o,s){let a,l,h,u,c,f,d,v,m,b,_,N,q,w,C,x,T,M;const L=t-r,A=n-r,S=e-o,D=i-o;w=L*D,f=Z*L,d=f-(f-L),v=L-d,f=Z*D,m=f-(f-D),b=D-m,C=v*b-(w-d*m-v*m-d*b),x=S*A,f=Z*S,d=f-(f-S),v=S-d,f=Z*A,m=f-(f-A),b=A-m,T=v*b-(x-d*m-v*m-d*b),_=C-T,c=C-_,gt[0]=C-(_+c)+(c-T),N=w+_,c=N-w,q=w-(N-c)+(_-c),_=q-x,c=q-_,gt[1]=q-(_+c)+(c-x),M=N+_,c=M-N,gt[2]=N-(M-c)+(_-c),gt[3]=M;let V=Oh(4,gt),H=Uh*s;if(V>=H||-V>=H||(c=t-L,a=t-(L+c)+(c-r),c=n-A,h=n-(A+c)+(c-r),c=e-S,l=e-(S+c)+(c-o),c=i-D,u=i-(D+c)+(c-o),a===0&&l===0&&h===0&&u===0)||(H=zh*s+Hh*Math.abs(V),V+=L*u+D*a-(S*h+A*l),V>=H||-V>=H))return V;w=a*D,f=Z*a,d=f-(f-a),v=a-d,f=Z*D,m=f-(f-D),b=D-m,C=v*b-(w-d*m-v*m-d*b),x=l*A,f=Z*l,d=f-(f-l),v=l-d,f=Z*A,m=f-(f-A),b=A-m,T=v*b-(x-d*m-v*m-d*b),_=C-T,c=C-_,J[0]=C-(_+c)+(c-T),N=w+_,c=N-w,q=w-(N-c)+(_-c),_=q-x,c=q-_,J[1]=q-(_+c)+(c-x),M=N+_,c=M-N,J[2]=N-(M-c)+(_-c),J[3]=M;const X=Li(4,gt,4,J,fo);w=L*u,f=Z*L,d=f-(f-L),v=L-d,f=Z*u,m=f-(f-u),b=u-m,C=v*b-(w-d*m-v*m-d*b),x=S*h,f=Z*S,d=f-(f-S),v=S-d,f=Z*h,m=f-(f-h),b=h-m,T=v*b-(x-d*m-v*m-d*b),_=C-T,c=C-_,J[0]=C-(_+c)+(c-T),N=w+_,c=N-w,q=w-(N-c)+(_-c),_=q-x,c=q-_,J[1]=q-(_+c)+(c-x),M=N+_,c=M-N,J[2]=N-(M-c)+(_-c),J[3]=M;const U=Li(X,fo,4,J,po);w=a*u,f=Z*a,d=f-(f-a),v=a-d,f=Z*u,m=f-(f-u),b=u-m,C=v*b-(w-d*m-v*m-d*b),x=l*h,f=Z*l,d=f-(f-l),v=l-d,f=Z*h,m=f-(f-h),b=h-m,T=v*b-(x-d*m-v*m-d*b),_=C-T,c=C-_,J[0]=C-(_+c)+(c-T),N=w+_,c=N-w,q=w-(N-c)+(_-c),_=q-x,c=q-_,J[1]=q-(_+c)+(c-x),M=N+_,c=M-N,J[2]=N-(M-c)+(_-c),J[3]=M;const Y=Li(U,po,4,J,go);return go[Y-1]}function fn(t,e,n,i,r,o){const s=(e-o)*(n-r),a=(t-r)*(i-o),l=s-a;if(s===0||a===0||s>0!=a>0)return l;const h=Math.abs(s+a);return Math.abs(l)>=Gh*h?l:-Xh(t,e,n,i,r,o,h)}const mo=Math.pow(2,-52),dn=new Uint32Array(512);class Tn{static from(e,n=Jh,i=jh){const r=e.length,o=new Float64Array(r*2);for(let s=0;s<r;s++){const a=e[s];o[2*s]=n(a),o[2*s+1]=i(a)}return new Tn(o)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:o}=this,s=e.length>>1;let a=1/0,l=1/0,h=-1/0,u=-1/0;for(let A=0;A<s;A++){const S=e[2*A],D=e[2*A+1];S<a&&(a=S),D<l&&(l=D),S>h&&(h=S),D>u&&(u=D),this._ids[A]=A}const c=(a+h)/2,f=(l+u)/2;let d=1/0,v,m,b;for(let A=0;A<s;A++){const S=Vi(c,f,e[2*A],e[2*A+1]);S<d&&(v=A,d=S)}const _=e[2*v],N=e[2*v+1];d=1/0;for(let A=0;A<s;A++){if(A===v)continue;const S=Vi(_,N,e[2*A],e[2*A+1]);S<d&&S>0&&(m=A,d=S)}let q=e[2*m],w=e[2*m+1],C=1/0;for(let A=0;A<s;A++){if(A===v||A===m)continue;const S=Qh(_,N,q,w,e[2*A],e[2*A+1]);S<C&&(b=A,C=S)}let x=e[2*b],T=e[2*b+1];if(C===1/0){for(let D=0;D<s;D++)this._dists[D]=e[2*D]-e[0]||e[2*D+1]-e[1];yt(this._ids,this._dists,0,s-1);const A=new Uint32Array(s);let S=0;for(let D=0,V=-1/0;D<s;D++){const H=this._ids[D];this._dists[H]>V&&(A[S++]=H,V=this._dists[H])}this.hull=A.subarray(0,S),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(fn(_,N,q,w,x,T)<0){const A=m,S=q,D=w;m=b,q=x,w=T,b=A,x=S,T=D}const M=Zh(_,N,q,w,x,T);this._cx=M.x,this._cy=M.y;for(let A=0;A<s;A++)this._dists[A]=Vi(e[2*A],e[2*A+1],M.x,M.y);yt(this._ids,this._dists,0,s-1),this._hullStart=v;let L=3;i[v]=n[b]=m,i[m]=n[v]=b,i[b]=n[m]=v,r[v]=0,r[m]=1,r[b]=2,o.fill(-1),o[this._hashKey(_,N)]=v,o[this._hashKey(q,w)]=m,o[this._hashKey(x,T)]=b,this.trianglesLen=0,this._addTriangle(v,m,b,-1,-1,-1);for(let A=0,S,D;A<this._ids.length;A++){const V=this._ids[A],H=e[2*V],X=e[2*V+1];if(A>0&&Math.abs(H-S)<=mo&&Math.abs(X-D)<=mo||(S=H,D=X,V===v||V===m||V===b))continue;let U=0;for(let me=0,ye=this._hashKey(H,X);me<this._hashSize&&(U=o[(ye+me)%this._hashSize],!(U!==-1&&U!==i[U]));me++);U=n[U];let Y=U,z;for(;z=i[Y],fn(H,X,e[2*Y],e[2*Y+1],e[2*z],e[2*z+1])>=0;)if(Y=z,Y===U){Y=-1;break}if(Y===-1)continue;let W=this._addTriangle(Y,V,i[Y],-1,-1,r[Y]);r[V]=this._legalize(W+2),r[Y]=W,L++;let K=i[Y];for(;z=i[K],fn(H,X,e[2*K],e[2*K+1],e[2*z],e[2*z+1])<0;)W=this._addTriangle(K,V,z,r[V],-1,r[K]),r[V]=this._legalize(W+2),i[K]=K,L--,K=z;if(Y===U)for(;z=n[Y],fn(H,X,e[2*z],e[2*z+1],e[2*Y],e[2*Y+1])<0;)W=this._addTriangle(z,V,Y,-1,r[Y],r[z]),this._legalize(W+2),r[z]=W,i[Y]=Y,L--,Y=z;this._hullStart=n[V]=Y,i[Y]=n[K]=V,i[V]=K,o[this._hashKey(H,X)]=V,o[this._hashKey(e[2*Y],e[2*Y+1])]=Y}this.hull=new Uint32Array(L);for(let A=0,S=this._hullStart;A<L;A++)this.hull[A]=S,S=i[S];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(Wh(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:i,coords:r}=this;let o=0,s=0;for(;;){const a=i[e],l=e-e%3;if(s=l+(e+2)%3,a===-1){if(o===0)break;e=dn[--o];continue}const h=a-a%3,u=l+(e+1)%3,c=h+(a+2)%3,f=n[s],d=n[e],v=n[u],m=n[c];if(Kh(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*v],r[2*v+1],r[2*m],r[2*m+1])){n[e]=m,n[a]=f;const _=i[c];if(_===-1){let q=this._hullStart;do{if(this._hullTri[q]===c){this._hullTri[q]=e;break}q=this._hullPrev[q]}while(q!==this._hullStart)}this._link(e,_),this._link(a,i[s]),this._link(s,c);const N=h+(a+1)%3;o<dn.length&&(dn[o++]=N)}else{if(o===0)break;e=dn[--o]}}return s}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,i,r,o,s){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function Wh(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function Vi(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}function Kh(t,e,n,i,r,o,s,a){const l=t-s,h=e-a,u=n-s,c=i-a,f=r-s,d=o-a,v=l*l+h*h,m=u*u+c*c,b=f*f+d*d;return l*(c*b-m*d)-h*(u*b-m*f)+v*(u*d-c*f)<0}function Qh(t,e,n,i,r,o){const s=n-t,a=i-e,l=r-t,h=o-e,u=s*s+a*a,c=l*l+h*h,f=.5/(s*h-a*l),d=(h*u-a*c)*f,v=(s*c-l*u)*f;return d*d+v*v}function Zh(t,e,n,i,r,o){const s=n-t,a=i-e,l=r-t,h=o-e,u=s*s+a*a,c=l*l+h*h,f=.5/(s*h-a*l),d=t+(h*u-a*c)*f,v=e+(s*c-l*u)*f;return{x:d,y:v}}function yt(t,e,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const o=t[r],s=e[o];let a=r-1;for(;a>=n&&e[t[a]]>s;)t[a+1]=t[a--];t[a+1]=o}else{const r=n+i>>1;let o=n+1,s=i;Nt(t,r,o),e[t[n]]>e[t[i]]&&Nt(t,n,i),e[t[o]]>e[t[i]]&&Nt(t,o,i),e[t[n]]>e[t[o]]&&Nt(t,n,o);const a=t[o],l=e[a];for(;;){do o++;while(e[t[o]]<l);do s--;while(e[t[s]]>l);if(s<o)break;Nt(t,o,s)}t[n+1]=t[s],t[s]=a,i-o+1>=s-n?(yt(t,e,o,i),yt(t,e,n,s-1)):(yt(t,e,n,s-1),yt(t,e,o,i))}}function Nt(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Jh(t){return t[0]}function jh(t){return t[1]}const yo=1e-6;class nt{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,i){e=+e,n=+n,i=+i;const r=e+i,o=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>yo||Math.abs(this._y1-o)>yo)&&(this._+="L"+r+","+o),i&&(this._+=`A${i},${i},0,1,1,${e-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=o}`)}rect(e,n,i,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class Zi{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class eu{constructor(e,[n,i,r,o]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:i},vectors:r}=this,o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let d=0,v=0,m=i.length,b,_;d<m;d+=3,v+=2){const N=i[d]*2,q=i[d+1]*2,w=i[d+2]*2,C=e[N],x=e[N+1],T=e[q],M=e[q+1],L=e[w],A=e[w+1],S=T-C,D=M-x,V=L-C,H=A-x,X=(S*H-D*V)*2;if(Math.abs(X)<1e-9){let U=1e9;const Y=i[0]*2;U*=Math.sign((e[Y]-C)*H-(e[Y+1]-x)*V),b=(C+L)/2-U*H,_=(x+A)/2+U*V}else{const U=1/X,Y=S*S+D*D,z=V*V+H*H;b=C+(H*Y-D*z)*U,_=x+(S*z-V*Y)*U}o[v]=b,o[v+1]=_}let s=n[n.length-1],a,l=s*4,h,u=e[2*s],c,f=e[2*s+1];r.fill(0);for(let d=0;d<n.length;++d)s=n[d],a=l,h=u,c=f,l=s*4,u=e[2*s],f=e[2*s+1],r[a+2]=r[l]=c-f,r[a+3]=r[l+1]=u-h}render(e){const n=e==null?e=new nt:void 0,{delaunay:{halfedges:i,inedges:r,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let u=0,c=i.length;u<c;++u){const f=i[u];if(f<u)continue;const d=Math.floor(u/3)*2,v=Math.floor(f/3)*2,m=s[d],b=s[d+1],_=s[v],N=s[v+1];this._renderSegment(m,b,_,N,e)}let l,h=o[o.length-1];for(let u=0;u<o.length;++u){l=h,h=o[u];const c=Math.floor(r[h]/3)*2,f=s[c],d=s[c+1],v=l*4,m=this._project(f,d,a[v+2],a[v+3]);m&&this._renderSegment(f,d,m[0],m[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new nt:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const i=n==null?n=new nt:void 0,r=this._clip(e);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let o=r.length;for(;r[0]===r[o-2]&&r[1]===r[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,i=e.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(e){const n=new Zi;return this.renderCell(e,n),n.value()}_renderSegment(e,n,i,r,o){let s;const a=this._regioncode(e,n),l=this._regioncode(i,r);a===0&&l===0?(o.moveTo(e,n),o.lineTo(i,r)):(s=this._clipSegment(e,n,i,r,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(e,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(e,n,i)===e}*neighbors(e){const n=this._clip(e);if(n)for(const i of this.delaunay.neighbors(e)){const r=this._clip(i);if(r){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[o]==r[a]&&n[o+1]==r[a+1]&&n[(o+2)%s]==r[(a+l-2)%l]&&n[(o+3)%s]==r[(a+l-1)%l]){yield i;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:o}}=this,s=i[e];if(s===-1)return null;const a=[];let l=s;do{const h=Math.floor(l/3);if(a.push(n[h*2],n[h*2+1]),l=l%3===2?l-2:l+1,o[l]!==e)break;l=r[l]}while(l!==s&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:i}=this,r=e*4;return i[r]||i[r+1]?this._clipInfinite(e,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(e,n)}_clipFinite(e,n){const i=n.length;let r=null,o,s,a=n[i-2],l=n[i-1],h,u=this._regioncode(a,l),c,f=0;for(let d=0;d<i;d+=2)if(o=a,s=l,a=n[d],l=n[d+1],h=u,u=this._regioncode(a,l),h===0&&u===0)c=f,f=0,r?r.push(a,l):r=[a,l];else{let v,m,b,_,N;if(h===0){if((v=this._clipSegment(o,s,a,l,h,u))===null)continue;[m,b,_,N]=v}else{if((v=this._clipSegment(a,l,o,s,u,h))===null)continue;[_,N,m,b]=v,c=f,f=this._edgecode(m,b),c&&f&&this._edge(e,c,f,r,r.length),r?r.push(m,b):r=[m,b]}c=f,f=this._edgecode(_,N),c&&f&&this._edge(e,c,f,r,r.length),r?r.push(_,N):r=[_,N]}if(r)c=f,f=this._edgecode(r[0],r[1]),c&&f&&this._edge(e,c,f,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,n,i,r,o,s){for(;;){if(o===0&&s===0)return[e,n,i,r];if(o&s)return null;let a,l,h=o||s;h&8?(a=e+(i-e)*(this.ymax-n)/(r-n),l=this.ymax):h&4?(a=e+(i-e)*(this.ymin-n)/(r-n),l=this.ymin):h&2?(l=n+(r-n)*(this.xmax-e)/(i-e),a=this.xmax):(l=n+(r-n)*(this.xmin-e)/(i-e),a=this.xmin),o?(e=a,n=l,o=this._regioncode(e,n)):(i=a,r=l,s=this._regioncode(i,r))}}_clipInfinite(e,n,i,r,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let h=0,u=a.length,c,f=this._edgecode(a[u-2],a[u-1]);h<u;h+=2)c=f,f=this._edgecode(a[h],a[h+1]),c&&f&&(h=this._edge(e,c,f,a,h),u=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,n,i,r,o){for(;n!==i;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(r[o]!==s||r[o+1]!==a)&&this.contains(e,s,a)&&(r.splice(o,0,s,a),o+=2)}if(r.length>4)for(let s=0;s<r.length;s+=2){const a=(s+2)%r.length,l=(s+4)%r.length;(r[s]===r[a]&&r[a]===r[l]||r[s+1]===r[a+1]&&r[a+1]===r[l+1])&&(r.splice(a,2),s-=2)}return o}_project(e,n,i,r){let o=1/0,s,a,l;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<o&&(l=this.ymin,a=e+(o=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<o&&(l=this.ymax,a=e+(o=s)*i)}if(i>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/i)<o&&(a=this.xmax,l=n+(o=s)*r)}else if(i<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/i)<o&&(a=this.xmin,l=n+(o=s)*r)}return[a,l]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const tu=2*Math.PI,mt=Math.pow;function nu(t){return t[0]}function iu(t){return t[1]}function ru(t){const{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){const r=2*e[i],o=2*e[i+1],s=2*e[i+2];if((n[s]-n[r])*(n[o+1]-n[r+1])-(n[o]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function ou(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class sr{static from(e,n=nu,i=iu,r){return new sr("length"in e?su(e,n,i,r):Float64Array.from(au(e,n,i,r)))}constructor(e){this._delaunator=new Tn(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&ru(e)){this.collinear=Int32Array.from({length:n.length/2},(f,d)=>d).sort((f,d)=>n[2*f]-n[2*d]||n[2*f+1]-n[2*d+1]);const l=this.collinear[0],h=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*h],n[2*h+1]],c=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let f=0,d=n.length/2;f<d;++f){const v=ou(n[2*f],n[2*f+1],c);n[2*f]=v[0],n[2*f+1]=v[1]}this._delaunator=new Tn(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,h=i.length;l<h;++l){const u=o[l%3===2?l-2:l+1];(i[l]===-1||s[u]===-1)&&(s[u]=l)}for(let l=0,h=r.length;l<h;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new eu(this,e)}*neighbors(e){const{inedges:n,hull:i,_hullIndex:r,halfedges:o,triangles:s,collinear:a}=this;if(a){const c=a.indexOf(e);c>0&&(yield a[c-1]),c<a.length-1&&(yield a[c+1]);return}const l=n[e];if(l===-1)return;let h=l,u=-1;do{if(yield u=s[h],h=h%3===2?h-2:h+1,s[h]!==e)return;if(h=o[h],h===-1){const c=i[(r[e]+1)%i.length];c!==u&&(yield c);return}}while(h!==l)}find(e,n,i=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const r=i;let o;for(;(o=this._step(i,e,n))>=0&&o!==i&&o!==r;)i=o;return o}_step(e,n,i){const{inedges:r,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:h}=this;if(r[e]===-1||!h.length)return(e+1)%(h.length>>1);let u=e,c=mt(n-h[e*2],2)+mt(i-h[e*2+1],2);const f=r[e];let d=f;do{let v=l[d];const m=mt(n-h[v*2],2)+mt(i-h[v*2+1],2);if(m<c&&(c=m,u=v),d=d%3===2?d-2:d+1,l[d]!==e)break;if(d=a[d],d===-1){if(d=o[(s[e]+1)%o.length],d!==v&&mt(n-h[d*2],2)+mt(i-h[d*2+1],2)<c)return d;break}}while(d!==f);return u}render(e){const n=e==null?e=new nt:void 0,{points:i,halfedges:r,triangles:o}=this;for(let s=0,a=r.length;s<a;++s){const l=r[s];if(l<s)continue;const h=o[s]*2,u=o[l]*2;e.moveTo(i[h],i[h+1]),e.lineTo(i[u],i[u+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const i=e==null?e=new nt:void 0,{points:r}=this;for(let o=0,s=r.length;o<s;o+=2){const a=r[o],l=r[o+1];e.moveTo(a+n,l),e.arc(a,l,n,0,tu)}return i&&i.value()}renderHull(e){const n=e==null?e=new nt:void 0,{hull:i,points:r}=this,o=i[0]*2,s=i.length;e.moveTo(r[o],r[o+1]);for(let a=1;a<s;++a){const l=2*i[a];e.lineTo(r[l],r[l+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new Zi;return this.renderHull(e),e.value()}renderTriangle(e,n){const i=n==null?n=new nt:void 0,{points:r,triangles:o}=this,s=o[e*=3]*2,a=o[e+1]*2,l=o[e+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,i=e.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new Zi;return this.renderTriangle(e,n),n.value()}}function su(t,e,n,i){const r=t.length,o=new Float64Array(r*2);for(let s=0;s<r;++s){const a=t[s];o[s*2]=e.call(i,a,s,t),o[s*2+1]=n.call(i,a,s,t)}return o}function*au(t,e,n,i){let r=0;for(const o of t)yield e.call(i,o,r,t),yield n.call(i,o,r,t),++r}var lu=Math.random,ts=function t(e){function n(i,r){var o,s;return i=i==null?0:+i,r=r==null?1:+r,function(){var a;if(o!=null)a=o,o=null;else do o=e()*2-1,a=e()*2-1,s=o*o+a*a;while(!s||s>1);return i+r*a*Math.sqrt(-2*Math.log(s)/s)}}return n.source=t,n}(lu);const hu=1664525,uu=1013904223,vo=1/4294967296;function cu(t=Math.random()){let e=(0<=t&&t<1?t/vo:Math.abs(t))|0;return()=>(e=hu*e+uu|0,vo*(e>>>0))}function fu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const wo=Symbol("implicit");function Rt(){var t=new Wr,e=[],n=[],i=wo;function r(o){let s=t.get(o);if(s===void 0){if(i!==wo)return i;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Wr;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Rt(e,n).unknown(i)},fu.apply(r,arguments),r}function vt(t,e,n){this.k=t,this.x=e,this.y=n}vt.prototype={constructor:vt,scale:function(t){return t===1?this:new vt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new vt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new vt(1,0,0);vt.prototype;var ns="/_app/immutable/assets/bush-84d45f5e.png",is="/_app/immutable/assets/gore-91728b43.png",rs="/_app/immutable/assets/nader-536cf690.png";function _o(t){let e,n;return{c(){e=I("figcaption"),n=B(t[0]),this.h()},l(i){e=$(i,"FIGCAPTION",{class:!0});var r=E(e);n=R(r,t[0]),r.forEach(g),this.h()},h(){k(e,"class","svelte-cane51")},m(i,r){F(i,e,r),y(e,n)},p(i,r){r&1&&To(n,i[0])},d(i){i&&g(e)}}}function du(t){let e,n,i,r,o,s,a,l=t[0]&&_o(t);return{c(){e=I("figure"),n=ae("svg"),i=ae("line"),r=ae("defs"),o=ae("clipPath"),s=ae("circle"),a=O(),l&&l.c(),this.h()},l(h){e=$(h,"FIGURE",{class:!0});var u=E(e);n=le(u,"svg",{id:!0,viewBox:!0,class:!0});var c=E(n);i=le(c,"line",{x1:!0,y1:!0,x2:!0,y2:!0,"stroke-color":!0,class:!0}),E(i).forEach(g),r=le(c,"defs",{});var f=E(r);o=le(f,"clipPath",{id:!0});var d=E(o);s=le(d,"circle",{r:!0}),E(s).forEach(g),d.forEach(g),f.forEach(g),c.forEach(g),a=G(u),l&&l.l(u),u.forEach(g),this.h()},h(){k(i,"x1","0"),k(i,"y1","50"),k(i,"x2","100"),k(i,"y2","50"),k(i,"stroke-color","black"),k(i,"class","svelte-cane51"),k(s,"r","5"),k(o,"id","imgClip"),k(n,"id",t[1]),k(n,"viewBox","0 0 100 100"),k(n,"class","svelte-cane51"),k(e,"class","svelte-cane51")},m(h,u){F(h,e,u),y(e,n),y(n,i),y(n,r),y(r,o),y(o,s),y(e,a),l&&l.m(e,null)},p(h,[u]){h[0]?l?l.p(h,u):(l=_o(h),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:It,o:It,d(h){h&&g(e),l&&l.d()}}}const pu={plurality:ps,approval:gs};let bo=0;const pn=10;function gu(t,e,n){let i,{label:r}=e,{candidates:o}=e,{nVoters:s=100}=e,{r:a=20}=e,{fidelity:l=30}=e,{seed:h=1158}=e,{method:u="plurality"}=e,c=o.map(([x,T],M)=>({x,y:T,i:M})),f=Rt(c.map(({i:x})=>x),["#0C7BDC","#DC3220","#FFC034"]).unknown("#000000"),d=Rt(c.map(({i:x})=>x),[is,ns,rs]);const v=ts.source(cu(h))(0,20),m=new Array(s).fill(null).map(()=>[v(),v()]),b=pu[u],_=new Array(l**2);let N,q;bo+=1;const w=`yee-diagram-${bo}`,C=Yo().on("drag",function(x,T){T.x=x.x,T.y=x.y,Ee(this).attr("transform",`translate(${T.x} ${T.y})`)}).on("end.update",()=>i());return Ji(()=>{const x=Ee("#"+w);n(9,N=x.append("g").attr("stroke","none").selectAll("path").data(_).join("path").attr("opacity",.3).attr("stroke-width",0)),i();const T=x.selectAll("g.candidate").data(c).join("g").attr("class","candidate").attr("transform",M=>`translate(${M.x} ${M.y})`).call(C);T.append("circle").attr("r",6).attr("fill",({i:M})=>f(M)),T.append("image").attr("width",pn).attr("height",pn).attr("x",-pn/2).attr("y",-pn/2).attr("clip-path","url(#imgClip)").attr("href",({i:M})=>d(M))}),t.$$set=x=>{"label"in x&&n(0,r=x.label),"candidates"in x&&n(2,o=x.candidates),"nVoters"in x&&n(3,s=x.nVoters),"r"in x&&n(4,a=x.r),"fidelity"in x&&n(5,l=x.fidelity),"seed"in x&&n(6,h=x.seed),"method"in x&&n(7,u=x.method)},t.$$.update=()=>{t.$$.dirty&1840&&n(11,i=()=>{if(!N)return;const x=100/l;for(let T=0;T<l;T++){const M=l*T,L=T%2?0:.5;for(let A=0;A<l;A++){let S=[T*x,(A+L)*x];n(8,_[M+A]=[S,b(c,m,S,a)],_)}}if(!q){const T=sr.from(_,([[M]])=>M,([[M,L]])=>L).voronoi([0,0,100,100]);n(10,q=T),N.data(_).attr("d",(M,L)=>T.renderCell(L))}N.data(_).attr("fill",T=>f(T[1].i))}),t.$$.dirty&2048&&i()},[r,w,o,s,a,l,h,u,_,N,q,i]}class ar extends Sn{constructor(e){super(),In(this,e,gu,du,$n,{label:0,candidates:2,nVoters:3,r:4,fidelity:5,seed:6,method:7})}}function xo(t){let e,n;return{c(){e=I("figcaption"),n=B(t[0]),this.h()},l(i){e=$(i,"FIGCAPTION",{class:!0});var r=E(e);n=R(r,t[0]),r.forEach(g),this.h()},h(){k(e,"class","svelte-cane51")},m(i,r){F(i,e,r),y(e,n)},p(i,r){r&1&&To(n,i[0])},d(i){i&&g(e)}}}function mu(t){let e,n,i,r,o,s,a,l=t[0]&&xo(t);return{c(){e=I("figure"),n=ae("svg"),i=ae("line"),r=ae("defs"),o=ae("clipPath"),s=ae("circle"),a=O(),l&&l.c(),this.h()},l(h){e=$(h,"FIGURE",{class:!0});var u=E(e);n=le(u,"svg",{id:!0,viewBox:!0,class:!0});var c=E(n);i=le(c,"line",{x1:!0,y1:!0,x2:!0,y2:!0,"stroke-color":!0,class:!0}),E(i).forEach(g),r=le(c,"defs",{});var f=E(r);o=le(f,"clipPath",{id:!0});var d=E(o);s=le(d,"circle",{r:!0}),E(s).forEach(g),d.forEach(g),f.forEach(g),c.forEach(g),a=G(u),l&&l.l(u),u.forEach(g),this.h()},h(){k(i,"x1","0"),k(i,"y1","50"),k(i,"x2","100"),k(i,"y2","50"),k(i,"stroke-color","black"),k(i,"class","svelte-cane51"),k(s,"r","5"),k(o,"id","imgClip"),k(n,"id",t[1]),k(n,"viewBox","0 0 100 100"),k(n,"class","svelte-cane51"),k(e,"class","svelte-cane51")},m(h,u){F(h,e,u),y(e,n),y(n,i),y(n,r),y(r,o),y(o,s),y(e,a),l&&l.m(e,null)},p(h,[u]){h[0]?l?l.p(h,u):(l=xo(h),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:It,o:It,d(h){h&&g(e),l&&l.d()}}}let ko=0;const gn=10;function yu(t,e,n){let{label:i}=e,{candidates:r}=e,{nVoters:o=100}=e,s=r.map(([m,b],_)=>({x:m,y:b,i:_})),a=Rt(s.map(({i:m})=>m),["#0C7BDC","#DC3220","#FFC034"]).unknown("#000000"),l=Rt(s.map(({i:m})=>m),[is,ns,rs]);const h=ts(0,20);let u=[],c;ko+=1;const f=`voting-simulation-${ko}`,d=()=>{c.selectAll("circle.voter").data(u).join("circle").attr("class","voter").attr("cx",([m])=>m).attr("cy",([m,b])=>b).attr("r",1).attr("opacity",.5).attr("fill",m=>a(s.sort((b,_)=>wn(m,[b.x,b.y])-wn(m,[_.x,_.y]))[0].i))},v=Yo().on("drag",function(m,b){b.x=m.x,b.y=m.y,Ee(this).attr("transform",`translate(${b.x} ${b.y})`)}).on("end.update",d);return Ji(()=>{c=Ee("#"+f);const m=(_,N)=>{u=new Array(o).fill(null).map(()=>[h()+_,h()+N]),d()};c.on("click",_=>{const[N,q]=Oi(_);m(N,q)}),m(50,50);const b=c.selectAll("g.candidate").data(s).join("g").attr("class","candidate").attr("transform",_=>`translate(${_.x} ${_.y})`).call(v);b.append("circle").attr("r",6).attr("fill",({i:_})=>a(_)),b.append("image").attr("width",gn).attr("height",gn).attr("x",-gn/2).attr("y",-gn/2).attr("clip-path","url(#imgClip)").attr("href",({i:_})=>l(_))}),t.$$set=m=>{"label"in m&&n(0,i=m.label),"candidates"in m&&n(2,r=m.candidates),"nVoters"in m&&n(3,o=m.nVoters)},[i,f,r,o]}class vu extends Sn{constructor(e){super(),In(this,e,yu,mu,$n,{label:0,candidates:2,nVoters:3})}}function Ao(t){let e;const n=t[4].default,i=us(n,t,t[3],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8)&&os(i,n,r,r[3],e?as(n,r[3],o,null):ss(r[3]),null)},i(r){e||(re(i,r),e=!0)},o(r){he(i,r),e=!1},d(r){i&&i.d(r)}}}function wu(t){let e,n,i=t[2]&&Ao(t);return{c(){e=I("div"),i&&i.c(),this.h()},l(r){e=$(r,"DIV",{style:!0});var o=E(e);i&&i.l(o),o.forEach(g),this.h()},h(){Ur(e,"min-height",(t[2]?0:t[0])+"px")},m(r,o){F(r,e,o),i&&i.m(e,null),t[5](e),n=!0},p(r,[o]){r[2]?i?(i.p(r,o),o&4&&re(i,1)):(i=Ao(r),i.c(),re(i,1),i.m(e,null)):i&&(ls(),he(i,1,1,()=>{i=null}),hs()),(!n||o&5)&&Ur(e,"min-height",(r[2]?0:r[0])+"px")},i(r){n||(re(i),n=!0)},o(r){he(i),n=!1},d(r){r&&g(e),i&&i.d(),t[5](null)}}}function _u(t,e,n){let{$$slots:i={},$$scope:r}=e,o,{initialHeight:s=0}=e,a=!1,l=!1;Ji(()=>{new IntersectionObserver(()=>{l?n(2,a=!0):l=!0},{threshold:.2}).observe(o)});function h(u){cs[u?"unshift":"push"](()=>{o=u,n(1,o)})}return t.$$set=u=>{"initialHeight"in u&&n(0,s=u.initialHeight),"$$scope"in u&&n(3,r=u.$$scope)},[s,o,a,r,i,h]}class Eo extends Sn{constructor(e){super(),In(this,e,_u,wu,$n,{initialHeight:0})}}function bu(t){let e,n;return e=new ar({props:{candidates:t[1],label:"The red bump above the line on Naders side is the spoiler effect. Those are simulated elections that Bush wins because Nader is in the race. The effect gets larger if you move Nader towards Gore."}}),{c(){Ze(e.$$.fragment)},l(i){Je(e.$$.fragment,i)},m(i,r){je(e,i,r),n=!0},p:It,i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){et(e,i)}}}function xu(t){let e,n;return e=new ar({props:{candidates:t[1],method:"approval",r:t[0],label:"Approval voting can help avoid the spoiler effect."}}),{c(){Ze(e.$$.fragment)},l(i){Je(e.$$.fragment,i)},m(i,r){je(e,i,r),n=!0},p(i,r){const o={};r&1&&(o.r=i[0]),e.$set(o)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){et(e,i)}}}function ku(t){let e,n,i,r,o,s,a,l,h,u,c,f,d,v,m,b,_,N,q,w,C,x,T,M,L,A,S,D,V,H,X,U,Y,z,W,K,me,ye,Bn,Lt,ot,st,Rn,at,Ne,Fn,Vt,ve,qn,Te,Dn,Ln,Yt,Se,Ht,we,Vn,Ie,Yn,Hn,Ot,lt,On,Gt,_e,Gn,$e,Un,zn,Ut,ht,Xn,zt,be,Xt,ut,Wn,Wt,se,Kn,Ce,Qn,Zn,Pe,Jn,jn,Kt,Me,ei,ct,Be,ti,Qt,xe,Zt,ft,ni,Jt,dt,ii,jt,Q,ri,Re,oi,si,Fe,ai,li,qe,hi,ui,De,ci,fi,Le,di,pi,en,fe,gi,mi,ne,Ve,Ye,yi,He,vi,wi,Oe,Ge,_i,Ue,bi,xi,ze,Xe,ki,We,Ai,Ei,Ke,Ni,Qe,Ti,tn;return a=new vu({props:{candidates:t[1],label:"Click anywhere to simulate a new election where the average voter is where you clicked. Drag the candidates around to see how the results change."}}),Se=new ar({props:{candidates:t[1].slice(0,2),label:"This is a Yee diagram. Each cell is colored by simulating an election with the average voter at that point."}}),be=new Eo({props:{initialHeight:600,$$slots:{default:[bu]},$$scope:{ctx:t}}}),xe=new Eo({props:{initialHeight:600,$$slots:{default:[xu]},$$scope:{ctx:t}}}),{c(){e=I("p"),n=B("What question do we expect to answer by holding an election? Elections are how we select our government, but they aren\u2019t the only way to do that. We hold elections because we believe they tell us something about who has the right to control our government in a way that appointments or heredity does not. But different voting methods answer different questions."),i=O(),r=I("p"),o=B("Visualizing our voting systems can help give us a sense of how the questions each system asks shape the answers we get. By playing around with what happens depending on where candidates are relative to each other, you can get a sense of what incentives our voting system gives to the people we elect. We\u2019re going to explore different systems by simulating many elections and seeing how the results change depending on where the average voter is."),s=O(),Ze(a.$$.fragment),l=O(),h=I("p"),u=B("This diagram shows a single election. The colored circles represent the positions of the candidates and voters in some abstract space. Imagine that the Y axis measures how focused the candidate is on environmental protection, and the X axis measures their position on some other issue like corporate tax rates. Voters prefer candidates that are closer to them. Clicking anywhere on this diagram simulates a new election where the average voter is where you clicked. What that means is that if we averaged together the positions of all of the voters they would be at that point, but if you click on the same point a few times you\u2019ll see that the position of each voter can change."),c=O(),f=I("p"),d=B("Looking at one simulated election doesn\u2019t tell us very much, so we\u2019ll use something called a "),v=I("a"),m=B("Yee diagram"),b=B(" to show how the results vary over many simulated elections depending on where the average voter is."),_=O(),N=I("p"),q=B("The US presidential election in 2000 was historic, partially because Ralph Nader chose to ignore those incentives. It was expected to be a tight race between George W Bush and Al Gore, but Nader was running as a third party candidate. Leading up to the election, a group of self identified \u201CNaders Raiders\u201D wrote an open letter to Nader asking him to drop out. They were worried that he would be handing the election to Bush."),w=O(),C=I("blockquote"),x=I("p"),T=B(`It is now clear that you might well give the White House to Bush. As a result, you would set back significantly the social progress to which you have devoted your entire, astonishing career. You have sacrificed for the benefit of the common good your entire adult life\u2026 It would be a cruel irony indeed if your major legacy were to erase the victory from the candidate who most embodies your philosophy, Al Gore, and to give the Executive Branch to the party which has consistently resisted your progressive ideals.
`),M=I("sup"),L=I("a"),A=B("1"),S=O(),D=I("p"),V=B("Carl Pope, the president of the Sierra Club, pleaded with Nader to reconsider his campaign strategy."),H=O(),X=I("blockquote"),U=I("p"),Y=B(`You pledged you would not campaign as a spoiler and would avoid the swing states. Your recent campaign rhetoric and campaign schedule make it clear that you have broken this pledge\u2026 Irresponsible as I find your strategy, I accept that you genuinely believe in it. Please accept that I, and the overwhelming majority of the environmental movement in this country, genuinely believe that your strategy is flawed, dangerous, and reckless.
`),z=I("sup"),W=I("a"),K=B("2"),me=O(),ye=I("p"),Bn=B("The Republican Leadership Council ran campaign ads featuring Nader, believing that the more people that voted for Nader, the better chance Bush had at winning the election."),Lt=O(),ot=I("blockquote"),st=I("p"),Rn=B(`Nader, running a low-budget campaign, is not airing any television commercials of his own and it\u2019s possible that the RLC will end up spending more on pro-Nader media that Nader himself.
`),at=I("sup"),Ne=I("a"),Fn=B("3"),Vt=O(),ve=I("p"),qn=B("Why were environmentalists, relatively ideolically similar to Nader, pleading with him not to run? Why were republicans trying to get people to vote for one of their opponents? All of these people believed that votes for Nader would have the effect of electing Bush, because of something known as the "),Te=I("a"),Dn=B("spoiler effect"),Ln=B("."),Yt=O(),Ze(Se.$$.fragment),Ht=O(),we=I("p"),Vn=B("This visualization is called a "),Ie=I("a"),Yn=B("Yee diagram"),Hn=B(". The background is colored based on who would win if the average voter was at that point. If there is a tie, the background will be grey; the black line just gives us a sense of where the middle is."),Ot=O(),lt=I("p"),On=B("The diagram is generated by simulating an election for each cell of the background, where the voters are randomly distributed around that cell. I would expect an ideal voting method to elect the candidate closest to any given cell."),Gt=O(),_e=I("p"),Gn=B("These diagrams don\u2019t tell us very much about any individual election, but they can help us explore how elections are shaped by the voting method that we choose. In the 2000 election, all ballots were counted using a method called "),$e=I("a"),Un=B("plurality voting"),zn=B(", where each voter picks their favorite candidate and the candidate with the most votes wins. In some sense, plurality voting asks voters which candidate they are most in favor of, but doesn\u2019t ask anything about what they think of the rest of the candidates. This makes it hard for plurality elections to find compromises."),Ut=O(),ht=I("p"),Xn=B("If only Bush and Gore had been running, the race would have been simple, the winner would be whoever was closer to the center of public opinion. But strange things start to happen when we consider Nader."),zt=O(),Ze(be.$$.fragment),Xt=O(),ut=I("p"),Wn=B("Because Nader is ideologically closer to Gore, voters are more likely to switch to Nader from Gore than to Nader from Bush. Depending on where we believe the average voter is this might not matter, but if we think that public opinion is somewhere between Bush and Gore, this is very likely to help Bush win. In that situation, plurality voting is unable to identify that for many voters (like Carl Pope and Naiders Raiders for Gore), Gore is a compromise between Nader and Bush. This is the spoiler effect that environmentalists were afraid of, and why republicans wanted to amplify Naders message."),Wt=O(),se=I("p"),Kn=B("The lesson many people take from the spoiler effect is that third party candidates harm the platforms they care about, but the spoiler effect doesn\u2019t happen in every voting system. While there are versions of this effect in plurality voting and in "),Ce=I("a"),Qn=B("instant runoff voting"),Zn=B(", other systems like "),Pe=I("a"),Jn=B("approval voting"),jn=B(" don\u2019t have this issue."),Kt=O(),Me=I("p"),ei=B("Approval voting ballots look very similar to plurality voting ballots, but voting involves selecting as many of the candidates as you would like rather than only your favorite. If plurality voting is asking voters who their favorite candidate is, approval voting is asking who voters would accept as the winner. The structure of that question gives us more of the information we need to identify compromises. The diagram below shows the dynamics of the same set of candidates, but in an election run with approval voting. "),ct=I("sup"),Be=I("a"),ti=B("4"),Qt=O(),Ze(xe.$$.fragment),Zt=O(),ft=I("p"),ni=B("Approval voting has an important property; if a candidate doesn\u2019t win the race, they don\u2019t affect the results. You can see this in the above diagram; moving candidate A around can change a cell from B to A, but it never changes any cell from B to C. Try moving Nader around, and watch the line between Bush and Gore. That line never moves, other than in areas that Nader now wins."),Jt=O(),dt=I("p"),ii=B("In the 2000 election, this stability property would have meant that republicans wouldn\u2019t have had any reason to encourage people to vote for one of their opponents. Environmentalists might have welcomed another candidate fighting for environmental justice, because voters who cared about the environment wouldn\u2019t have to choose between Gore and Nader. Approval voting would give them a way to express that they were ok with either one."),jt=O(),Q=I("p"),ri=B("For a long time the US has treated plurality voting as the only option, but that is changing. Voters in Fargo and St. Louis restructured their elections to use approval voting, and voters in "),Re=I("a"),oi=B("San Francisco"),si=B(", "),Fe=I("a"),ai=B("Austin"),li=B(", "),qe=I("a"),hi=B("Seattle"),ui=B(", "),De=I("a"),ci=B("Missouri"),fi=B(", and "),Le=I("a"),di=B("Utah"),pi=B(" are working to change how they vote as well. You might soon have an opportunity to choose how your government is elected. What do you want your voting system to encourage?"),en=O(),fe=I("div"),gi=I("hr"),mi=O(),ne=I("ol"),Ve=I("li"),Ye=I("a"),yi=B("Open letter from Naders Raiders for Gore"),He=I("a"),vi=B("\u21A9"),wi=O(),Oe=I("li"),Ge=I("a"),_i=B("Open letter from Carl Pope"),Ue=I("a"),bi=B("\u21A9"),xi=O(),ze=I("li"),Xe=I("a"),ki=B("Washington Post article on GOP ads for Nader"),We=I("a"),Ai=B("\u21A9"),Ei=O(),Ke=I("li"),Ni=B("Approval voting has another parameter that we don\u2019t have to think about in the context of plurality voting; how accepting are you? The less accepting you are, the more likely you are to only vote for one candidate, or to refuse to vote at all. The more accepting you are, the more likely you are to be ok with every candidate, and therefore indifferent to the outcome. In the approval diagram, voters vote for anyone within a certain radius of them. While picking a radius that is very small or very large compared to the distribution of voters leads to some strange effects, in practice such behavior is unlikely. A very large radius would mean that most people are voting for every candidate, despite the fact that that means their vote is irrelevant. A very small radius would mean that most people refuse to vote at all unless the perfect candidate is running."),Qe=I("a"),Ti=B("\u21A9"),this.h()},l(p){e=$(p,"P",{});var P=E(e);n=R(P,"What question do we expect to answer by holding an election? Elections are how we select our government, but they aren\u2019t the only way to do that. We hold elections because we believe they tell us something about who has the right to control our government in a way that appointments or heredity does not. But different voting methods answer different questions."),P.forEach(g),i=G(p),r=$(p,"P",{});var kt=E(r);o=R(kt,"Visualizing our voting systems can help give us a sense of how the questions each system asks shape the answers we get. By playing around with what happens depending on where candidates are relative to each other, you can get a sense of what incentives our voting system gives to the people we elect. We\u2019re going to explore different systems by simulating many elections and seeing how the results change depending on where the average voter is."),kt.forEach(g),s=G(p),Je(a.$$.fragment,p),l=G(p),h=$(p,"P",{});var At=E(h);u=R(At,"This diagram shows a single election. The colored circles represent the positions of the candidates and voters in some abstract space. Imagine that the Y axis measures how focused the candidate is on environmental protection, and the X axis measures their position on some other issue like corporate tax rates. Voters prefer candidates that are closer to them. Clicking anywhere on this diagram simulates a new election where the average voter is where you clicked. What that means is that if we averaged together the positions of all of the voters they would be at that point, but if you click on the same point a few times you\u2019ll see that the position of each voter can change."),At.forEach(g),c=G(p),f=$(p,"P",{});var nn=E(f);d=R(nn,"Looking at one simulated election doesn\u2019t tell us very much, so we\u2019ll use something called a "),v=$(nn,"A",{href:!0,rel:!0});var lr=E(v);m=R(lr,"Yee diagram"),lr.forEach(g),b=R(nn," to show how the results vary over many simulated elections depending on where the average voter is."),nn.forEach(g),_=G(p),N=$(p,"P",{});var hr=E(N);q=R(hr,"The US presidential election in 2000 was historic, partially because Ralph Nader chose to ignore those incentives. It was expected to be a tight race between George W Bush and Al Gore, but Nader was running as a third party candidate. Leading up to the election, a group of self identified \u201CNaders Raiders\u201D wrote an open letter to Nader asking him to drop out. They were worried that he would be handing the election to Bush."),hr.forEach(g),w=G(p),C=$(p,"BLOCKQUOTE",{});var ur=E(C);x=$(ur,"P",{});var Si=E(x);T=R(Si,`It is now clear that you might well give the White House to Bush. As a result, you would set back significantly the social progress to which you have devoted your entire, astonishing career. You have sacrificed for the benefit of the common good your entire adult life\u2026 It would be a cruel irony indeed if your major legacy were to erase the victory from the candidate who most embodies your philosophy, Al Gore, and to give the Executive Branch to the party which has consistently resisted your progressive ideals.
`),M=$(Si,"SUP",{id:!0});var cr=E(M);L=$(cr,"A",{href:!0,class:!0});var fr=E(L);A=R(fr,"1"),fr.forEach(g),cr.forEach(g),Si.forEach(g),ur.forEach(g),S=G(p),D=$(p,"P",{});var dr=E(D);V=R(dr,"Carl Pope, the president of the Sierra Club, pleaded with Nader to reconsider his campaign strategy."),dr.forEach(g),H=G(p),X=$(p,"BLOCKQUOTE",{});var pr=E(X);U=$(pr,"P",{});var Ii=E(U);Y=R(Ii,`You pledged you would not campaign as a spoiler and would avoid the swing states. Your recent campaign rhetoric and campaign schedule make it clear that you have broken this pledge\u2026 Irresponsible as I find your strategy, I accept that you genuinely believe in it. Please accept that I, and the overwhelming majority of the environmental movement in this country, genuinely believe that your strategy is flawed, dangerous, and reckless.
`),z=$(Ii,"SUP",{id:!0});var gr=E(z);W=$(gr,"A",{href:!0,class:!0});var mr=E(W);K=R(mr,"2"),mr.forEach(g),gr.forEach(g),Ii.forEach(g),pr.forEach(g),me=G(p),ye=$(p,"P",{});var yr=E(ye);Bn=R(yr,"The Republican Leadership Council ran campaign ads featuring Nader, believing that the more people that voted for Nader, the better chance Bush had at winning the election."),yr.forEach(g),Lt=G(p),ot=$(p,"BLOCKQUOTE",{});var vr=E(ot);st=$(vr,"P",{});var $i=E(st);Rn=R($i,`Nader, running a low-budget campaign, is not airing any television commercials of his own and it\u2019s possible that the RLC will end up spending more on pro-Nader media that Nader himself.
`),at=$($i,"SUP",{id:!0});var wr=E(at);Ne=$(wr,"A",{href:!0,class:!0});var _r=E(Ne);Fn=R(_r,"3"),_r.forEach(g),wr.forEach(g),$i.forEach(g),vr.forEach(g),Vt=G(p),ve=$(p,"P",{});var rn=E(ve);qn=R(rn,"Why were environmentalists, relatively ideolically similar to Nader, pleading with him not to run? Why were republicans trying to get people to vote for one of their opponents? All of these people believed that votes for Nader would have the effect of electing Bush, because of something known as the "),Te=$(rn,"A",{href:!0,rel:!0});var br=E(Te);Dn=R(br,"spoiler effect"),br.forEach(g),Ln=R(rn,"."),rn.forEach(g),Yt=G(p),Je(Se.$$.fragment,p),Ht=G(p),we=$(p,"P",{});var on=E(we);Vn=R(on,"This visualization is called a "),Ie=$(on,"A",{href:!0,rel:!0});var xr=E(Ie);Yn=R(xr,"Yee diagram"),xr.forEach(g),Hn=R(on,". The background is colored based on who would win if the average voter was at that point. If there is a tie, the background will be grey; the black line just gives us a sense of where the middle is."),on.forEach(g),Ot=G(p),lt=$(p,"P",{});var kr=E(lt);On=R(kr,"The diagram is generated by simulating an election for each cell of the background, where the voters are randomly distributed around that cell. I would expect an ideal voting method to elect the candidate closest to any given cell."),kr.forEach(g),Gt=G(p),_e=$(p,"P",{});var sn=E(_e);Gn=R(sn,"These diagrams don\u2019t tell us very much about any individual election, but they can help us explore how elections are shaped by the voting method that we choose. In the 2000 election, all ballots were counted using a method called "),$e=$(sn,"A",{href:!0,rel:!0});var Ar=E($e);Un=R(Ar,"plurality voting"),Ar.forEach(g),zn=R(sn,", where each voter picks their favorite candidate and the candidate with the most votes wins. In some sense, plurality voting asks voters which candidate they are most in favor of, but doesn\u2019t ask anything about what they think of the rest of the candidates. This makes it hard for plurality elections to find compromises."),sn.forEach(g),Ut=G(p),ht=$(p,"P",{});var Er=E(ht);Xn=R(Er,"If only Bush and Gore had been running, the race would have been simple, the winner would be whoever was closer to the center of public opinion. But strange things start to happen when we consider Nader."),Er.forEach(g),zt=G(p),Je(be.$$.fragment,p),Xt=G(p),ut=$(p,"P",{});var Nr=E(ut);Wn=R(Nr,"Because Nader is ideologically closer to Gore, voters are more likely to switch to Nader from Gore than to Nader from Bush. Depending on where we believe the average voter is this might not matter, but if we think that public opinion is somewhere between Bush and Gore, this is very likely to help Bush win. In that situation, plurality voting is unable to identify that for many voters (like Carl Pope and Naiders Raiders for Gore), Gore is a compromise between Nader and Bush. This is the spoiler effect that environmentalists were afraid of, and why republicans wanted to amplify Naders message."),Nr.forEach(g),Wt=G(p),se=$(p,"P",{});var pt=E(se);Kn=R(pt,"The lesson many people take from the spoiler effect is that third party candidates harm the platforms they care about, but the spoiler effect doesn\u2019t happen in every voting system. While there are versions of this effect in plurality voting and in "),Ce=$(pt,"A",{href:!0,rel:!0});var Tr=E(Ce);Qn=R(Tr,"instant runoff voting"),Tr.forEach(g),Zn=R(pt,", other systems like "),Pe=$(pt,"A",{href:!0,rel:!0});var Sr=E(Pe);Jn=R(Sr,"approval voting"),Sr.forEach(g),jn=R(pt," don\u2019t have this issue."),pt.forEach(g),Kt=G(p),Me=$(p,"P",{});var Ci=E(Me);ei=R(Ci,"Approval voting ballots look very similar to plurality voting ballots, but voting involves selecting as many of the candidates as you would like rather than only your favorite. If plurality voting is asking voters who their favorite candidate is, approval voting is asking who voters would accept as the winner. The structure of that question gives us more of the information we need to identify compromises. The diagram below shows the dynamics of the same set of candidates, but in an election run with approval voting. "),ct=$(Ci,"SUP",{id:!0});var Ir=E(ct);Be=$(Ir,"A",{href:!0,class:!0});var $r=E(Be);ti=R($r,"4"),$r.forEach(g),Ir.forEach(g),Ci.forEach(g),Qt=G(p),Je(xe.$$.fragment,p),Zt=G(p),ft=$(p,"P",{});var Cr=E(ft);ni=R(Cr,"Approval voting has an important property; if a candidate doesn\u2019t win the race, they don\u2019t affect the results. You can see this in the above diagram; moving candidate A around can change a cell from B to A, but it never changes any cell from B to C. Try moving Nader around, and watch the line between Bush and Gore. That line never moves, other than in areas that Nader now wins."),Cr.forEach(g),Jt=G(p),dt=$(p,"P",{});var Pr=E(dt);ii=R(Pr,"In the 2000 election, this stability property would have meant that republicans wouldn\u2019t have had any reason to encourage people to vote for one of their opponents. Environmentalists might have welcomed another candidate fighting for environmental justice, because voters who cared about the environment wouldn\u2019t have to choose between Gore and Nader. Approval voting would give them a way to express that they were ok with either one."),Pr.forEach(g),jt=G(p),Q=$(p,"P",{});var te=E(Q);ri=R(te,"For a long time the US has treated plurality voting as the only option, but that is changing. Voters in Fargo and St. Louis restructured their elections to use approval voting, and voters in "),Re=$(te,"A",{href:!0,rel:!0});var Mr=E(Re);oi=R(Mr,"San Francisco"),Mr.forEach(g),si=R(te,", "),Fe=$(te,"A",{href:!0,rel:!0});var Br=E(Fe);ai=R(Br,"Austin"),Br.forEach(g),li=R(te,", "),qe=$(te,"A",{href:!0,rel:!0});var Rr=E(qe);hi=R(Rr,"Seattle"),Rr.forEach(g),ui=R(te,", "),De=$(te,"A",{href:!0,rel:!0});var Fr=E(De);ci=R(Fr,"Missouri"),Fr.forEach(g),fi=R(te,", and "),Le=$(te,"A",{href:!0,rel:!0});var qr=E(Le);di=R(qr,"Utah"),qr.forEach(g),pi=R(te," are working to change how they vote as well. You might soon have an opportunity to choose how your government is elected. What do you want your voting system to encourage?"),te.forEach(g),en=G(p),fe=$(p,"DIV",{class:!0});var an=E(fe);gi=$(an,"HR",{}),mi=G(an),ne=$(an,"OL",{});var ke=E(ne);Ve=$(ke,"LI",{id:!0});var Pi=E(Ve);Ye=$(Pi,"A",{href:!0,rel:!0});var Dr=E(Ye);yi=R(Dr,"Open letter from Naders Raiders for Gore"),Dr.forEach(g),He=$(Pi,"A",{href:!0,class:!0});var Lr=E(He);vi=R(Lr,"\u21A9"),Lr.forEach(g),Pi.forEach(g),wi=G(ke),Oe=$(ke,"LI",{id:!0});var Mi=E(Oe);Ge=$(Mi,"A",{href:!0,rel:!0});var Vr=E(Ge);_i=R(Vr,"Open letter from Carl Pope"),Vr.forEach(g),Ue=$(Mi,"A",{href:!0,class:!0});var Yr=E(Ue);bi=R(Yr,"\u21A9"),Yr.forEach(g),Mi.forEach(g),xi=G(ke),ze=$(ke,"LI",{id:!0});var Bi=E(ze);Xe=$(Bi,"A",{href:!0,rel:!0});var Hr=E(Xe);ki=R(Hr,"Washington Post article on GOP ads for Nader"),Hr.forEach(g),We=$(Bi,"A",{href:!0,class:!0});var Or=E(We);Ai=R(Or,"\u21A9"),Or.forEach(g),Bi.forEach(g),Ei=G(ke),Ke=$(ke,"LI",{id:!0});var Ri=E(Ke);Ni=R(Ri,"Approval voting has another parameter that we don\u2019t have to think about in the context of plurality voting; how accepting are you? The less accepting you are, the more likely you are to only vote for one candidate, or to refuse to vote at all. The more accepting you are, the more likely you are to be ok with every candidate, and therefore indifferent to the outcome. In the approval diagram, voters vote for anyone within a certain radius of them. While picking a radius that is very small or very large compared to the distribution of voters leads to some strange effects, in practice such behavior is unlikely. A very large radius would mean that most people are voting for every candidate, despite the fact that that means their vote is irrelevant. A very small radius would mean that most people refuse to vote at all unless the perfect candidate is running."),Qe=$(Ri,"A",{href:!0,class:!0});var Gr=E(Qe);Ti=R(Gr,"\u21A9"),Gr.forEach(g),Ri.forEach(g),ke.forEach(g),an.forEach(g),this.h()},h(){k(v,"href","https://electowiki.org/wiki/Yee_diagram"),k(v,"rel","nofollow"),k(L,"href","#fn-1"),k(L,"class","footnote-ref"),k(M,"id","fnref-1"),k(W,"href","#fn-2"),k(W,"class","footnote-ref"),k(z,"id","fnref-2"),k(Ne,"href","#fn-3"),k(Ne,"class","footnote-ref"),k(at,"id","fnref-3"),k(Te,"href","https://electionscience.org/library/the-spoiler-effect/"),k(Te,"rel","nofollow"),k(Ie,"href","https://electowiki.org/wiki/Yee_diagram"),k(Ie,"rel","nofollow"),k($e,"href","https://en.wikipedia.org/wiki/Plurality_voting"),k($e,"rel","nofollow"),k(Ce,"href","https://en.wikipedia.org/wiki/Instant-runoff_voting"),k(Ce,"rel","nofollow"),k(Pe,"href","https://electionscience.org/approval-voting-101/"),k(Pe,"rel","nofollow"),k(Be,"href","#fn-4"),k(Be,"class","footnote-ref"),k(ct,"id","fnref-4"),k(Re,"href","https://electionscience.org/commentary-analysis/outside-the-box-voting-reform-in-the-bay-area/"),k(Re,"rel","nofollow"),k(Fe,"href","https://electionscience.org/commentary-analysis/breaking-the-partisan-mold-in-austin-texas/"),k(Fe,"rel","nofollow"),k(qe,"href","https://electionscience.org/commentary-analysis/bridging-the-political-divide-in-seattle/"),k(qe,"rel","nofollow"),k(De,"href","https://electionscience.org/commentary-analysis/keeping-up-momentum-in-missouri/"),k(De,"rel","nofollow"),k(Le,"href","https://electionscience.org/commentary-analysis/bringing-freedom-of-choice-to-utah/"),k(Le,"rel","nofollow"),k(Ye,"href","https://web.archive.org/web/20010415013029/http://www.nadersraidersforgore.com/printversion.htm"),k(Ye,"rel","nofollow"),k(He,"href","#fnref-1"),k(He,"class","footnote-backref"),k(Ve,"id","fn-1"),k(Ge,"href","https://web.archive.org/web/20160829041953/http://www.commondreams.org/headlines/102700-03.htm"),k(Ge,"rel","nofollow"),k(Ue,"href","#fnref-2"),k(Ue,"class","footnote-backref"),k(Oe,"id","fn-2"),k(Xe,"href","https://web.archive.org/web/20050916115106/https://www.washingtonpost.com/wp-srv/aponline/20001027/aponline115918_000.htm"),k(Xe,"rel","nofollow"),k(We,"href","#fnref-3"),k(We,"class","footnote-backref"),k(ze,"id","fn-3"),k(Qe,"href","#fnref-4"),k(Qe,"class","footnote-backref"),k(Ke,"id","fn-4"),k(fe,"class","footnotes")},m(p,P){F(p,e,P),y(e,n),F(p,i,P),F(p,r,P),y(r,o),F(p,s,P),je(a,p,P),F(p,l,P),F(p,h,P),y(h,u),F(p,c,P),F(p,f,P),y(f,d),y(f,v),y(v,m),y(f,b),F(p,_,P),F(p,N,P),y(N,q),F(p,w,P),F(p,C,P),y(C,x),y(x,T),y(x,M),y(M,L),y(L,A),F(p,S,P),F(p,D,P),y(D,V),F(p,H,P),F(p,X,P),y(X,U),y(U,Y),y(U,z),y(z,W),y(W,K),F(p,me,P),F(p,ye,P),y(ye,Bn),F(p,Lt,P),F(p,ot,P),y(ot,st),y(st,Rn),y(st,at),y(at,Ne),y(Ne,Fn),F(p,Vt,P),F(p,ve,P),y(ve,qn),y(ve,Te),y(Te,Dn),y(ve,Ln),F(p,Yt,P),je(Se,p,P),F(p,Ht,P),F(p,we,P),y(we,Vn),y(we,Ie),y(Ie,Yn),y(we,Hn),F(p,Ot,P),F(p,lt,P),y(lt,On),F(p,Gt,P),F(p,_e,P),y(_e,Gn),y(_e,$e),y($e,Un),y(_e,zn),F(p,Ut,P),F(p,ht,P),y(ht,Xn),F(p,zt,P),je(be,p,P),F(p,Xt,P),F(p,ut,P),y(ut,Wn),F(p,Wt,P),F(p,se,P),y(se,Kn),y(se,Ce),y(Ce,Qn),y(se,Zn),y(se,Pe),y(Pe,Jn),y(se,jn),F(p,Kt,P),F(p,Me,P),y(Me,ei),y(Me,ct),y(ct,Be),y(Be,ti),F(p,Qt,P),je(xe,p,P),F(p,Zt,P),F(p,ft,P),y(ft,ni),F(p,Jt,P),F(p,dt,P),y(dt,ii),F(p,jt,P),F(p,Q,P),y(Q,ri),y(Q,Re),y(Re,oi),y(Q,si),y(Q,Fe),y(Fe,ai),y(Q,li),y(Q,qe),y(qe,hi),y(Q,ui),y(Q,De),y(De,ci),y(Q,fi),y(Q,Le),y(Le,di),y(Q,pi),F(p,en,P),F(p,fe,P),y(fe,gi),y(fe,mi),y(fe,ne),y(ne,Ve),y(Ve,Ye),y(Ye,yi),y(Ve,He),y(He,vi),y(ne,wi),y(ne,Oe),y(Oe,Ge),y(Ge,_i),y(Oe,Ue),y(Ue,bi),y(ne,xi),y(ne,ze),y(ze,Xe),y(Xe,ki),y(ze,We),y(We,Ai),y(ne,Ei),y(ne,Ke),y(Ke,Ni),y(Ke,Qe),y(Qe,Ti),tn=!0},p(p,P){const kt={};P&16&&(kt.$$scope={dirty:P,ctx:p}),be.$set(kt);const At={};P&17&&(At.$$scope={dirty:P,ctx:p}),xe.$set(At)},i(p){tn||(re(a.$$.fragment,p),re(Se.$$.fragment,p),re(be.$$.fragment,p),re(xe.$$.fragment,p),tn=!0)},o(p){he(a.$$.fragment,p),he(Se.$$.fragment,p),he(be.$$.fragment,p),he(xe.$$.fragment,p),tn=!1},d(p){p&&g(e),p&&g(i),p&&g(r),p&&g(s),et(a,p),p&&g(l),p&&g(h),p&&g(c),p&&g(f),p&&g(_),p&&g(N),p&&g(w),p&&g(C),p&&g(S),p&&g(D),p&&g(H),p&&g(X),p&&g(me),p&&g(ye),p&&g(Lt),p&&g(ot),p&&g(Vt),p&&g(ve),p&&g(Yt),et(Se,p),p&&g(Ht),p&&g(we),p&&g(Ot),p&&g(lt),p&&g(Gt),p&&g(_e),p&&g(Ut),p&&g(ht),p&&g(zt),et(be,p),p&&g(Xt),p&&g(ut),p&&g(Wt),p&&g(se),p&&g(Kt),p&&g(Me),p&&g(Qt),et(xe,p),p&&g(Zt),p&&g(ft),p&&g(Jt),p&&g(dt),p&&g(jt),p&&g(Q),p&&g(en),p&&g(fe)}}}function Au(t){let e,n;const i=[t[2],No];let r={$$slots:{default:[ku]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Yi(r,i[o]);return e=new ds({props:r}),{c(){Ze(e.$$.fragment)},l(o){Je(e.$$.fragment,o)},m(o,s){je(e,o,s),n=!0},p(o,[s]){const a=s&4?fs(i,[s&4&&zr(o[2]),s&0&&zr(No)]):{};s&17&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){n||(re(e.$$.fragment,o),n=!0)},o(o){he(e.$$.fragment,o),n=!1},d(o){et(e,o)}}}const No={title:"Visualizing Voting Systems: Plurality vs Approval Voting",date:"2021-06-16T09:45:32.000Z",status:"published",blurb:"Visualizing our voting systems can help give us a sense of how the questions each system asks shape the answers we get. By playing around with what happens depending on where candidates are relative to each other, you can get a sense of what incentives our voting system gives to the people we elect."};function Eu(t,e,n){let i=40;const r=[[50,30],[50,70],[30,15]];return t.$$set=o=>{n(2,e=Yi(Yi({},e),Xr(o)))},e=Xr(e),[i,r,e]}class Su extends Sn{constructor(e){super(),In(this,e,Eu,Au,$n,{})}}export{Su as default,No as metadata};
