import{s as S,d as N}from"./lFPzZVYi.js";function O(t){let r;for(;r=t.sourceEvent;)t=r;return t}function U(t,r){if(t=O(t),r===void 0&&(r=t.currentTarget),r){var c=r.ownerSVGElement||r;if(c.createSVGPoint){var a=c.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a=a.matrixTransform(r.getScreenCTM().inverse()),[a.x,a.y]}if(r.getBoundingClientRect){var s=r.getBoundingClientRect();return[t.clientX-s.left-r.clientLeft,t.clientY-s.top-r.clientTop]}}return[t.pageX,t.pageY]}const A={passive:!1},v={capture:!0,passive:!1};function D(t){t.stopImmediatePropagation()}function y(t){t.preventDefault(),t.stopImmediatePropagation()}function H(t){var r=t.document.documentElement,c=S(t).on("dragstart.drag",y,v);"onselectstart"in r?c.on("selectstart.drag",y,v):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function J(t,r){var c=t.document.documentElement,a=S(t).on("dragstart.drag",null);r&&(a.on("click.drag",y,v),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in c?a.on("selectstart.drag",null):(c.style.MozUserSelect=c.__noselect,delete c.__noselect)}const E=t=>()=>t;function M(t,{sourceEvent:r,subject:c,target:a,identifier:s,active:m,x:h,y:x,dx:w,dy:b,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:c,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:m,enumerable:!0,configurable:!0},x:{value:h,enumerable:!0,configurable:!0},y:{value:x,enumerable:!0,configurable:!0},dx:{value:w,enumerable:!0,configurable:!0},dy:{value:b,enumerable:!0,configurable:!0},_:{value:d}})}M.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Q(t){return!t.ctrlKey&&!t.button}function W(){return this.parentNode}function Z(t,r){return r??{x:t.x,y:t.y}}function _(){return navigator.maxTouchPoints||"ontouchstart"in this}function ee(){var t=Q,r=W,c=Z,a=_,s={},m=N("start","drag","end"),h=0,x,w,b,d,k=0;function i(e){e.on("mousedown.drag",V).filter(a).on("touchstart.drag",R).on("touchmove.drag",q,A).on("touchend.drag touchcancel.drag",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function V(e,n){if(!(d||!t.call(this,e,n))){var u=X(this,r.call(this,e,n),e,n,"mouse");u&&(S(e.view).on("mousemove.drag",B,v).on("mouseup.drag",I,v),H(e.view),D(e),b=!1,x=e.clientX,w=e.clientY,u("start",e))}}function B(e){if(y(e),!b){var n=e.clientX-x,u=e.clientY-w;b=n*n+u*u>k}s.mouse("drag",e)}function I(e){S(e.view).on("mousemove.drag mouseup.drag",null),J(e.view,b),y(e),s.mouse("end",e)}function R(e,n){if(t.call(this,e,n)){var u=e.changedTouches,o=r.call(this,e,n),l=u.length,g,p;for(g=0;g<l;++g)(p=X(this,o,e,n,u[g].identifier,u[g]))&&(D(e),p("start",e,u[g]))}}function q(e){var n=e.changedTouches,u=n.length,o,l;for(o=0;o<u;++o)(l=s[n[o].identifier])&&(y(e),l("drag",e,n[o]))}function F(e){var n=e.changedTouches,u=n.length,o,l;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),o=0;o<u;++o)(l=s[n[o].identifier])&&(D(e),l("end",e,n[o]))}function X(e,n,u,o,l,g){var p=m.copy(),f=U(g||u,n),Y,C,T;if((T=c.call(e,new M("beforestart",{sourceEvent:u,target:i,identifier:l,active:h,x:f[0],y:f[1],dx:0,dy:0,dispatch:p}),o))!=null)return Y=T.x-f[0]||0,C=T.y-f[1]||0,function K(j,z,L){var G=f,P;switch(j){case"start":s[l]=K,P=h++;break;case"end":delete s[l],--h;case"drag":f=U(L||z,n),P=h;break}p.call(j,e,new M(j,{sourceEvent:z,subject:T,target:i,identifier:l,active:P,x:f[0]+Y,y:f[1]+C,dx:f[0]-G[0],dy:f[1]-G[1],dispatch:p}),o)}}return i.filter=function(e){return arguments.length?(t=typeof e=="function"?e:E(!!e),i):t},i.container=function(e){return arguments.length?(r=typeof e=="function"?e:E(e),i):r},i.subject=function(e){return arguments.length?(c=typeof e=="function"?e:E(e),i):c},i.touchable=function(e){return arguments.length?(a=typeof e=="function"?e:E(!!e),i):a},i.on=function(){var e=m.on.apply(m,arguments);return e===m?i:e},i.clickDistance=function(e){return arguments.length?(k=(e=+e)*e,i):Math.sqrt(k)},i}export{ee as d,U as p};
